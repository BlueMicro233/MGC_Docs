# 着色器 基本概念

参阅：[渲染模组和引擎](terms.md#渲染模组和引擎)

::: warning 施工中
这篇文章还未重写完毕，可能无法流畅阅读。
:::

## 何谓着色器？

对于一个完整的现代图形应用程序（例如 *OpenGL*、*Vulkan*、*DirectX*等）来说，着色器是它渲染场景的**手段**。  
我们知道图形应用程序的目的是读取模型文件或硬编码几何体，并在屏幕上绘制。着色器就描述了我们传入的几何体在屏幕上的**何种位置**以**何种方式**绘制。

## 渲染模组／引擎如何帮助光影和游戏交流

渲染模组／引擎（下简称渲染模组）充当了游戏和光影的桥梁。由于原版所提供的信息极其有限（许多效果必须的变量没有直接提供），如果想仅利用原版资源包的着色器来编写光影，无异于**自寻死路**。  
渲染模组利用模组加载器提供的 [接口](terms.md#应用程序接口) 或直接对 Minecraft 源代码进行逆向工程并注入，接管了 Minecraft 的原版渲染管线，并提供了大量信息和更多 [缓冲区](terms.md#缓冲区) ，为光影开发提供便利。

一些渲染模组还修改了原本所使用的图形接口，将 [OpenGL](terms.md#opengl) 替换为了 *Vulkan* 。

## 光影如何在游戏中运作

光影通常以多个着色器组成，着色器接收渲染模组提供的各种变量，以及先前乃至上一帧计算好的存入缓冲区的信息，按照程序进行计算后输出到指定的缓冲区。

不同渲染模组的工作原理不尽相同，所对应的光影包规格也有所区别。

## 渲染龙和它的光影朋友们 <sup>BE</sup>

**首先明确一个概念：[光影是着色器的集合](terms.md#光影包)**。无论是哪个 Minecraft 版本，两者都没有明确的分界线。基岩版光影基于 *OpenGL ES* 的 *GLSL* 或 *DirectX* 的 *HLSL* <sup>Windows</sup> 。由于接口限制，基岩版光影可以实现的效果非常少，但仍可以通过一系列稀奇古怪的方法实现物理渲染体系。
- **能否自己加接口？** 基岩版基于 ***C++*** ，反编译（可以获取到游戏源码，JE的模组接口就是靠的这种方法）极其困难，几乎不可能实现。
- **渲染龙引擎是微软官方在 BE 实装的渲染引擎**。目前，渲染龙已覆盖到了 `Windows` 、`Xbox` 、`Android` 等多平台的基岩版 Minecraft 上，替代了原本第三方着色器的渲染方案。理想情况下，Windows版本能够通过调用 `RTX` 或 `RX 6000 及以上` 系列显卡的光线追踪加速单元以提升光线追踪的效率，而其他平台上的引擎能够起到优化作用。~~意外的是，渲染龙一开始是给 Java 版 Minecraft 设计的，而且渲染龙目前只起到了负优化作用。~~
- **渲染龙的引入并不一定是积极的**。
  - 渲染龙目前在多个平台上表现为负优化，例如操作、渲染延迟等，且帧数并不一定有提升。
  - 渲染龙的算法加密破坏了很多东西，除了光影还有例如 `区块显示`、`红石能量显示`、`亮度显示`、`夜视`、`透视`、`小地图` 等，这些原本都能由第三方光影实现。而它们的消失给一些玩家带来了不少困扰。
  - 官方的光追光影虽然在光追方面技术力高，但其在细节调校方面做的并不如人意，也对主打真实风格的地图与材质作者造成了很大困扰，并且在手机版直接导致了第三方光影集体灭绝。
  - 这也是我们目前为什么反对渲染龙的原因，在此希望大家可以**理性看待渲染龙，而非一味吹捧。**
- 2022 下半年更新： 渲染龙 **已被破解** ，但由于破解团队收到微软的 DMCA 致函（你可以理解为类似律师函，但只是警告），以及新的光影编写方法过于麻烦（需反编译后编辑，再回编译后放到固定文件夹替换相关文件，重启游戏），目前 BE 光影仍然**沉寂**。

## 网易提供的延迟处理接口 <sup>BE(NE)</sup>

网易的延迟处理接口来得要比渲染龙更早。

---

扩展阅读：
- [着色器 技术科普](shaders-advanced.md)
- [术语表 渲染模组和引擎](terms.md#渲染模组和引擎)
